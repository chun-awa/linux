#!/bin/sh
RESET=$(printf "\033[0m")
RED=$(printf "\033[91m")
YELLOW=$(printf "\033[93m")
GREEN=$(printf "\033[92m")
CYAN=$(printf "\033[96m")
BLUE=$(printf "\033[94m")
MAGENTA=$(printf "\033[95m")
WHITE=$(printf "\033[97m")
log(){
	echo "${GREEN}=>${RESET} ${WHITE}${1}${RESET}"
}
log_info(){
	echo "${CYAN}=>${RESET} ${WHITE}${1}${RESET}"
}
log_error(){
	echo "${RED}=>${RESET} ${WHITE}${1}${RESET}"
}
progress(){
	while [ -e "/proc/${1}" ];do
		for i in '|' '/' '-' '\';do
			printf "${i}"
			usleep 1000
			printf "\033[D"
		done
	done
	echo
}
decompress(){
    case "${1}" in
        *.tbz|*.bz2) bzip2 -d ;;
        *.lz)        lzip -dc ;;
        *.tar)       cat      ;;
        *.tgz|*.gz)  gzip -d  ;;
        *.xz|*.txz)  xz -dc   ;;
    esac<"${1}"
}
installpkg(){
    if ! [ -e /var/packages/"${1}".tar.* ];then
    	log_error "Package ${1} not found"
    fi
    log "Installing ${1}..."
    decompress /var/packages/"${1}".tar.*>"/tmp/${1}.tar"
	cd /
    tar -xf "/tmp/${1}.tar"
}
case "${1}" in
    --help)
        log_info "${0} install <pkg>:Install a package"
        ;;
    install)
        installpkg "${2}"
        ;;
esac
